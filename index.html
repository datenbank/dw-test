<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Dw-test by datenbank</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Dw-test</h1>
        <h2>Data Warehouse Test Toolkit</h2>
        <a href="https://github.com/datenbank/dw-test" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>Welcome to DW Test Toolkit.</h1>

<p>Data Warehouse Test Toolkit is made to assist you when testing a Data Warehouse and ensure quality. This toolkit allows you to write queries for source and target systems as well as to compare the results and report any differences.</p>

<h2>Download/install</h2>

<p>Download the latest version, and extract the zip file to your prefered destination.</p>
<p>Java (Oracle) version 8 update 40, or higher is required to run the toolkit. jTds (MS SQL Server) and Oracle JDBC drivers are provided in the distribution.</p>
          <h3>Run</h3>

<p>Navigate to the bin folder, and type 
<p>
<code>dw-test.bat --gui</code></p>
to open the toolkit graphical user interface or just double click the dw-test.bat file. </p>
<p>To set up connections to source and target databases select Settings->Open file. 
<img src="./images/Settings_OpenFile.JPG" />

Edit the connection string to match your requirements. Save your settings by clicking File->Save, and close the window.
<img src="./images/Settings_OpenFilePopup.JPG" />
</p>

<h4>Windows Authentication</h4>
<p>To use Windows Authentication with MS SQL Server leave out a user name and password from connection string
and download jTDS from <a href="https://sourceforge.net/projects/jtds/">https://sourceforge.net/projects/jtds/</a>
extract the zip file and put the SSO directory in PATH (environment variable). For example <code>C:\jtds-1.3.1-dist\x64\SSO</code> for 64-bit environments, or <code>C:\jtds-1.3.1-dist\x86\SSO</code> for 32-bit.</p>

<p><h1>Test case example</h1>
Create your first test case select New test case, and enter name. 
<img src="./images/NewTestCase.JPG" />
<img src="./images/NewTestCasePopup.JPG" />
This will create a file in [install_dir]/bin/Target/[testcase_name].sql

The table is updated with your test case. Right click (Code->Open create target SQL) to edit the query. 
<img src="./images/CodeOpenTargetSQL.JPG" />
The query will use the target connection to execute.
<img src="./images/CodeOpenTargetSQLPopup.JPG" />
Type in a query, and save (File->Save). Click OK to the notification, and close the window.
<img src="./images/CodeOpenTargetSQLPopupSave.JPG" />
<p>
Create a source query by clicking Code->Open/create source SQL. The file is saved 
at [install_dir]/bin/Source/[testcase_name].sql</p>
<img src="./images/CodeOpenSourceSQL.JPG" />
Write a similar query to match the target query. The query will be executed using the source connection.


<h2>Execute Queries</h2>
To execute the test case right click and select Execute on the test case. Use the toolbar to execute all test cases, or the Group menu to execute a group of test cases.
<img src="./images/Execute.JPG" />
Both target and source queries are executed.
<img src="./images/Executed.JPG" />

<h2>Results</h2>
The query results are put in the subfolders /Result in Target and Source directory holding the .sql files.
To view the results, select Results->Open target data set, for example.
<img src="./images/ResultOpenTargetDataSet.JPG" />
This will open the .csv file with your preferred .csv editor. 
<img src="./images/ResultOpenTargetDataSetPopup.JPG" />
Modify the csvReader in the settings file (Setting->Open file).
<p>
To use Excel for example:<p><code>
csvReader = "C:/Program Files (x86)/Microsoft Office/Office14/excel.exe /e"</code>
</p>
Compare the results of the test case by clicking Compare (right click menu). It will compare the two data sets.
<img src="./images/Compare.JPG" />
The Status is updated, and the test case is completed with success (same result of queries).
<img src="./images/Compared.JPG" />
To see any differences between the source and target results use menu Results->Open difference. 
This will open a .csv file placed in /Report folder. Only if there are differences, a difference file is created.

</p>
<h2>Callbacks</h2>
<p>
Before and After callbacks can be created, before/after a target query is executed. They can be used to start ETL programs etc. The callback file accepts any .bat script code.</p>
<h2>Scripts</h2>
<p>To automate creating test cases, scripts can be used. Groovy scripts can be placed into the directory bin/Scripts of the install directory. 
A model object is passed to the script at execution time. The model contains the information on mapping source and target databases provided by the model.csv file. Here is a model illustration.
<img src="./images/uml.jpg" />
To execute a script go to Scripts->Run [script name].groovy
<p>See the scripts in the distribution for examples.</p>
<p>The Model Mapper Helper can be used to create the model.csv file. Load tables information through the Groups menu - it will use the connections set up in the settings. To map columns and test types, drag and drop on target column.
File->Save will save the mapping to model.csv. When the model/mapping is set up the scripts can be executed in order to create test cases. This automation is very helpful and alot can be tested with little effort.
</p>
<img src="./images/Mapper.JPG" />
<p>
Here is a description of the Scripts provided in the distribution:  
<ul>
  <li>TestCount.groovy generates SELECT COUNT(*) queries per table. Use test type COUNT</li>
  <li>TestDistict.groovy generates SELECT DISTINCT column1, column2 queries per table. Use test type DISTINCT</li>
  <li>TestNonsense.groovy generates SELECT SUM(column1), SUM(column2) queries per table (no GROUP BY is added). Use test type NONSENSE</li>
  <li>TestHash.groovy generates SELECT BINARY_CHECKSUM(column1, column2) queries per table. Use test type HASH</li>
  <li>TestSumBy.groovy generates SELECT SUM(column1), column2 queries per table (columns marked by SUMBY are aggregated and columns marked by GROUPBY are added to the GROUP BY clause). Use test type SUMBY and GROUPBY</li>
<li>TestColumnCnt.groovy generates SELECT column1, COUNT(*) queries per column. Use test type COLUMN_CNT.</li>
<li>TestFactJoinCnt.groovy generates SELECT COUNT(*) queries per table. Use test type JOIN. This type is applied at bit different than the others. Create a group connection with source and target connection being the same. Then map dimensions keys to fact foreign keys. The script will generate a query where all the dimensions are joined on the fact table. The source query is just a SELECT COUNT(*) without joins. This will test if the fact table is consistent, and not loosing rows on joins or generating more rows. </li>

</ul>
</p>
<p>In the following, you can see how columns are mapped and the generated queries
  <img src="./images/MapperExample.JPG" />
  <img src="./images/COUNT.JPG" />
  <img src="./images/DISTINCT.JPG" />
  <img src="./images/NONSENSE.JPG" />
  <img src="./images/HASH.JPG" />
  <img src="./images/SUMBY.JPG" />
  <img src="./images/COLUMN_CNT.JPG" />
</p>
<h1>Multiple Connections Sets</h1>
<p>
If you name our test cases [group]#[test case] it will match your queries to a group connection set. If no group is put in the test case name, the default connections will be used.   
<img src="./images/GroupConnections.JPG" />
Here is an example of naming a test case to be put into a specific group.
<img src="./images/CreateGroup.JPG" />
</p>
<h1>Settings</h1>
<p>In the table below the application settings are listed. The settings can be changed in the conf.txt file, or through the Settings menu in the application.</p>
<table>
  <col width="10%">
<col width="10%">
<col width="30%">
<col width="50%">
<tr>
<th>parameter</th>
<th>default</th>
<th>possible</th>
<th>description</th>
</tr>
<tr>
<td width="10%">path</td>
<td width="10%">./</td>
<td width="30%">Path to where model.csv and Source and Target folders are placed.</td>
<td width="50%">Can be used to point to folders outside of the install directory. To a shared drive etc.</td>
</tr>

<tr>
<td>model</td>
<td>model.csv</td>
<td>Name of the model file</td>
<td>If you want to switch between model files you can use this parameter</td>
</tr>

<tr>
<td>sourceModel</td>
<td>source.csv</td>
<td>Name of the source model file</td>
<td>If you want to read in data from a file to the Model Mapper instead of reading meta data from the database.</td>
</tr>

<tr>
<td>targetModel</td>
<td>target.csv</td>
<td>Name of the target model file</td>
<td>If you want to read in data from a file to the Model Mapper instead of reading meta data from the database.</td>
</tr>

<tr>
<td>source</td>
<td>jdbc:jtds:sqlserver://localhost:1433/master</td>
<td>Any JDBC connection string</td>
<td>The connection string to the Default source database</td>
</tr>

<tr>
<td>target</td>
<td>jdbc:jtds:sqlserver://localhost:1433/master</td>
<td>Any JDBC connection string</td>
<td>The connection string to the Default target database</td>
</tr>

<tr>
<td>sourceDriver</td>
<td>net.sourceforge.jtds.jdbc.Driver</td>
<td>Any JDBC driver</td>
<td>The driver for the Default source database</td>
</tr>

<tr>
<td>targetDriver</td>
<td>net.sourceforge.jtds.jdbc.Driver</td>
<td>Any JDBC driver</td>
<td>The driver for the Default target database</td>
</tr>

<tr>
<td>csvReader</td>
<td><blank></td>
<td>Path to a CSV Reader program</td>
<td>If set the query results will open with this program.</td>
</tr>

<tr>
<td>csvSeperator</td>
<td>;</td>
<td>Any character fx ; or ,</td>
<td>How do you wan the columns to be seperated.</td>
</tr>

<tr>
<td>sqlProgramTarget</td>
<td><blank></td>
<td>Path to any SQL editor</td>
<td>If set the queries within the Default group will open with this program</td>
</tr>



<tr>
<td>sqlProgramSource</td>
<td><blank></td>
<td>Path to any SQL editor</td>
<td>If set the queries within the Default group will open with this program</td>
</tr>

<tr>
<td>sqlFetchSize</td>
<td>10</td>
<td>Any number</td>
<td>How should the JDBC driver fetch the results. Some drivers don't support this or ignore this feature.</td>
</tr>


<tr>
<td>degreeOfParallelism</td>
<td>1</td>
<td>Any number</td>
<td>Enables queries to run in parallel. Set to 5 if you want to run 5 concurrent queries against the database.</td>
</tr>


<tr>
<td>saveCompareHistory</td>
<td>false</td>
<td>true or false</td>
<td>Should you append to the difference file (true) or write to a clean file (false)</td>
</tr>

<tr>
<td>testType</td>
<td>["DISTINCT", "COLUMN_CNT", "HASH", "COUNT", "GROUPBY", "SUMBY", "NONSENSE"]</td>
<td>A list of String</td>
<td>Add more test types if you want to implement your own scripts to generate test cases.</td>
</tr>

<tr>
<td>groups</td>
<td>-</td>
<td>target, targetDriver, source, sourceDriver, sqlProgramTarget, sqlProgramSource</td>
<td>You can put the parameter in a group to differentiate between groups of test cases.</td>
</tr>

</table>
<h1>Help</h1>
<p>You can get help by writing to <ul>
<li>Write queustions: <a href="mailto:dw-test-toolkit@googlegroups.com">dw-test-toolkit@googlegroups.com</a></li>
<li>Subscribe: <a href="mailto:dw-test-toolkit+subscribe@googlegroups.com">dw-test-toolkit+subscribe@googlegroups.com</a></li> 
<li>Unsubscribe: <a href="mailto:dw-test-toolkit+unsubscribe@googlegroups.com">dw-test-toolkit+unsubscribe@googlegroups.com</a></li>  
</ul>
</p>
<h1>Alternatives</h1>
<p>
NBi is an alternative to DW Test Toolkit. NBi is targeted for the Microsoft platform with a bit more technical approach than DW Test Toolkit. For more information visit: 
<a href="http://www.nbi.io/">http://www.nbi.io/</a>
</p>
<p>QuerySurge is a commercial alternative, if that is the way you want to go. <a href="http://querysurge.com">http://querysurge.com</a></p>
        </section> 
        <aside id="sidebar">
          <a href="https://github.com/datenbank/dw-test/releases/download/v1.6.0/dw-test-1.6.0.zip" class="button">
            <small>download .zip file</small>
            v1.6.0</a>
            
        <a href="https://github.com/datenbank/dw-test/releases" class="button">
            <small>Go see all versions</small>
            All vers.</a>
          <p class="repo-owner"><a href="https://github.com/datenbank/dw-test"></a> is maintained by <a href="https://github.com/datenbank">datenbank</a>.</p>

          </aside>
      </div>
    </div>

  
  </body>
</html>
